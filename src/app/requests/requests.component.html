<app-breadcrumb [icon]="'assets/images/icons/ShoppingBagOpen.svg'" [list]="breadCrumbList"></app-breadcrumb>

<div class="request-table">
  <p-table [value]="requests.data" (sortFunction)="customSort($event)" [customSort]="true" [(selection)]="selectedProducts" dataKey="code">
    <ng-template pTemplate="header">
        <tr>
            <th>
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            <th pSortableColumn="user">
              <div class="flex gap-10">
                <span>المستخدم</span> 
                <p-sortIcon field="user"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="accountType">
              <div class="flex gap-10">
                <span>نوع الحساب</span> 
                <p-sortIcon field="accountType"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="phone">
              <div class="flex gap-10">
                <span>رقم الهاتف</span>
                <p-sortIcon field="phone"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="fax">
              <div class="flex gap-10">
                <span>فاكس</span>
                <p-sortIcon field="fax"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="status">
              <div class="flex gap-10">
                <span>حالة الطلب</span>
                <p-sortIcon field="status"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="address" style="min-width: 14rem">
              <div class="flex gap-10">
                <span>عنوان الشركة</span>
                <p-sortIcon field="address"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="branches">
              <div class="flex gap-10">
                <span>عدد الفروع</span>
                <p-sortIcon field="branches"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="attachments" style="min-width: 14rem">
              <div class="flex gap-10">
                <span>المرفقات</span>
                <p-sortIcon field="attachments"></p-sortIcon>
              </div>
            </th>
            <th>
              <img src="assets/images/icons/grid.svg" alt="">
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-request>
        <tr>
            <td>
                <p-tableCheckbox></p-tableCheckbox>
            </td>
            <td>
              <div class="user">
                <div class="img">
                  <img src="assets/images/dummyRequest.png" alt="">
                </div>
                <div class="info">
                  <h5>{{request.name}}</h5>
                  <span>{{request.workEmail}}</span>
                </div>
              </div>
            </td>
            <td>خاص</td>
            <td>01158202283</td>
            <td>{{request.faxNumber}}</td>
            <td class="status">
              <span *ngIf="request.status == 'rejected'" class="rejected">مرفوض</span>
              <span *ngIf="request.status == 'pending'" class="pending">انتظار</span>
              <span *ngIf="request.status == 'full-rejected'" class="full-rejected">رفض نهائى</span>
              <span *ngIf="request.status == 'accepted'" class="accepted">مقبول</span>
            </td>
            <td>{{request.address}}</td>
            <td>6</td>
            <td>
              <button class="download-attachments">
                <div class="img">
                  <img src="assets/images/icons/brownDownload.svg" alt="">
                </div>
                <span>تحميل المرفقات</span>
              </button>
            </td>
            <td class="position-relative" dropdown>
              <button id="button-animated" class="transparent-button actions dropdown-toggle" dropdownToggle aria-controls="actions-list">
                <div class="img">
                  <img src="assets/images/icons/dots.svg" alt="">
                </div>
              </button>
              <ul id="actions-list" *dropdownMenu class="dropdown-menu"
                  role="menu" aria-labelledby="button-animated">
                <li role="menuitem"><a class="dropdown-item" [routerLink]="'/request-details/' + request.id">عرض الطلب</a></li>
              </ul>
            </td>
        </tr>
    </ng-template>
  </p-table>
</div>
